{% extends 'baseDashboard.html' %}
{% block title %}
Trade Sync: User Settings
{% endblock %}
{% block additional_styles %}
<link rel="stylesheet" href="{{url_for('static', filename='/css/userSettingsStyles.css')}}">
{% endblock %}
{% block dash_content %}
<div class="container">
   <div class="user-info">
      <span>
         <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="user-info-icon">
            <path stroke-linecap="round" stroke-linejoin="round" d="M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"></path>
         </svg>
      </span>
      <h2>
         {{ account_username }}
      </h2>
      <p> Joined </p>
      <p>{{ account_join_date }}</p>
      <div class="accounts-container">
         <div class="accounts-container-box">
            <h5>Accounts</h5>
            <p>{{ user_account_amount }}</p>
         </div>
         <div class="accounts-container-box">
            <h5>Open Positions</h5>
            <p>{{ user_account_open_trades_amount }}</p>
         </div>
      </div>
      <div class="button-container">
         <div class="button-stack">
            <button class="stack-btn u-info">
               <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6 tab-icon">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"></path>
               </svg>
               Personal Info
            </button>
            <button class="stack-btn u-settings">
               <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6 tab-icon">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12a7.5 7.5 0 0 0 15 0m-15 0a7.5 7.5 0 1 1 15 0m-15 0H3m16.5 0H21m-1.5 0H12m-8.457 3.077 1.41-.513m14.095-5.13 1.41-.513M5.106 17.785l1.15-.964m11.49-9.642 1.149-.964M7.501 19.795l.75-1.3m7.5-12.99.75-1.3m-6.063 16.658.26-1.477m2.605-14.772.26-1.477m0 17.726-.26-1.477M10.698 4.614l-.26-1.477M16.5 19.794l-.75-1.299M7.5 4.205 12 12m6.894 5.785-1.149-.964M6.256 7.178l-1.15-.964m15.352 8.864-1.41-.513M4.954 9.435l-1.41-.514M12.002 12l-3.75 6.495"></path>
               </svg>
               Settings
            </button>
            <button class="stack-btn u-password">
               <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6 tab-icon">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"></path>
               </svg>
               Password
            </button>
            <button class="stack-btn u-logout">
               <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-6">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15M12 9l-3 3m0 0 3 3m-3-3h12.75"></path>
               </svg>
               Logout
            </button>
         </div>
      </div>
   </div>
   <div class="settings-container">
      <div class="user-info-div hidden">
         <div class="title-container">
            <h2>
               <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"></path>
               </svg>
               Personal Info
            </h2>
         </div>
         <form action="/your-form-action" method="POST">
            <div class="info-container">
               <div class="form-group">
                  <label for="username">Username:</label>
                  <div class="error-message hidden" id="username-error">
                     The username you entered already exists.
                  </div>
                  <input type="text" id="username" name="username" placeholder="{{ account_username }}" required>
               </div>
               <!-- Submit button here -->
               <button class="username-change-submit" type="submit">Update</button>
            </div>
         </form>
         <div class="delete-account-container">
            <h3>Delete Account</h3>
            <p class="warning-text">Deleting your account is permanent and cannot be undone.</p>
            <button onclick="deleteAccount()" class="delete-btn">Delete Account</button>
            <button onclick="cancelDeletion()" class="delete-btn-cancel hidden">Cancel</button>
            <a href="{{ url_for('auth.delete_account', username= account_username) }}"><button class="delete-btn-confirm hidden">Confirm</button></a>
         </div>
      </div>
      <div class="user-settings-div hidden">
         <div class="title-container">
            <h2>
               <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12a7.5 7.5 0 0 0 15 0m-15 0a7.5 7.5 0 1 1 15 0m-15 0H3m16.5 0H21m-1.5 0H12m-8.457 3.077 1.41-.513m14.095-5.13 1.41-.513M5.106 17.785l1.15-.964m11.49-9.642 1.149-.964M7.501 19.795l.75-1.3m7.5-12.99.75-1.3m-6.063 16.658.26-1.477m2.605-14.772.26-1.477m0 17.726-.26-1.477M10.698 4.614l-.26-1.477M16.5 19.794l-.75-1.299M7.5 4.205 12 12m6.894 5.785-1.149-.964M6.256 7.178l-1.15-.964m15.352 8.864-1.41-.513M4.954 9.435l-1.41-.514M12.002 12l-3.75 6.495"></path>
               </svg>
               Settings
            </h2>
         </div>
         <form action="/your-form-action" method="POST">
            <!-- Currency selection dropdown -->
            <div class="form-group">
               <label for="currency">Currency:</label>
               <select id="currency" name="currency" required>
                  <option value="" disabled>Select a currency</option>
                  <option value="USD" selected>USD - United States Dollar</option>
                  <option value="EUR">EUR - Euro</option>
                  <option value="GBP">GBP - British Pound</option>
                  <option value="JPY">JPY - Japanese Yen</option>
                  <!-- Add more currencies as needed -->
               </select>
            </div>
            <!-- Submit button -->
            <button class="username-change-submit" type="submit">Update</button>
         </form>
         <form action="/your-form-action" method="POST">
            <!-- Time Zone selection dropdown -->
            <div class="form-group">
               <label for="timezone">Select Time Zone:</label>
               <select id="timezone" name="timezone">
                  <option value="" disabled>Select a time zone</option>
                  <option value="EST" selected>EST - Eastern Standard Time (UTC -5)</option>
                  <option value="UTC">UTC - Coordinated Universal Time</option>
                  <option value="CST">CST - Central Standard Time (UTC -6)</option>
                  <option value="MST">MST - Mountain Standard Time (UTC -7)</option>
                  <option value="PST">PST - Pacific Standard Time (UTC -8)</option>
                  <option value="GMT">GMT - Greenwich Mean Time</option>
                  <option value="CET">CET - Central European Time (UTC +1)</option>
                  <option value="IST">IST - Indian Standard Time (UTC +5:30)</option>
                  <option value="JST">JST - Japan Standard Time (UTC +9)</option>
                  <!-- Add more time zones as needed -->
               </select>
            </div>
            <!-- Submit button -->
            <button class="username-change-submit" type="submit">Update</button>
         </form>
      </div>
      <div class="user-password-div hidden">
         <div class="title-container">
            <h2>
               <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M16.5 10.5V6.75a4.5 4.5 0 1 0-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H6.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"></path>
               </svg>
               Password
            </h2>
         </div>
         <form action="/your-form-action" method="POST">
            <!-- Current password input field -->
            <div class="form-group">
               <label for="current_password">Current Password:</label>
               <input type="password" id="current_password" name="current_password" value="" required>
            </div>
            <!-- New password input field -->
            <div class="form-group">
               <label for="new_password">New Password:</label>
               <input type="password" id="new_password" name="new_password" value="" required>
            </div>
            <div class="error-message hidden" id="username-error">
               Your password could not be updated.
            </div>
            <!-- Submit button -->
            <button class="username-change-submit" type="submit">Update</button>
         </form>
      </div>
   </div>
   <div id="logoutModal" class="modal hidden">
      <div class="modal-content">
         <h3>Confirm</h3>
         <p>You will be logged out.</p>
         <div class="modal-actions">
            <a class="link" href="{{ url_for('page.logout') }}"><button id="confirmLogout" class="modal-btn danger">Logout</button></a>
            <button id="cancelLogout" class="modal-btn">Cancel</button>
         </div>
      </div>
   </div>
   {% block scripts %}
   <script>
      const accountSettingsSection = document.querySelector('.account-settings-section');
      accountSettingsSection.classList.add('active-section')
   </script>
   <script> let username = "{{ account_username }}" </script>
   <script src="{{ url_for('static', filename='/js/logoutModalManagement.js') }}"></script>
   <script src="{{ url_for('static', filename='/js/accountDeletion.js') }}"></script>
   <script src="{{ url_for('static', filename='/js/tabManagerDash.js') }}"></script>
   {% endblock %}
</div>
{% endblock %}
